{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/laura/Desktop/ProjectAngular.Net/MyLibrary/UI/library.web/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { FormBuilder, ReactiveFormsModule, Validators } from '@angular/forms';\nimport { PasswordService } from '../../services/password.service';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { firstValueFrom } from 'rxjs';\nimport { HttpErrorResponse } from '@angular/common/http';\nimport { CommonModule } from '@angular/common';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../../services/password.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nfunction ResetPasswordComponent_div_274_small_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\");\n    i0.ɵɵtext(1, \"Email is required.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ResetPasswordComponent_div_274_small_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\");\n    i0.ɵɵtext(1, \"Invalid email format.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ResetPasswordComponent_div_274_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, ResetPasswordComponent_div_274_small_1_Template, 2, 0, \"small\", 9)(2, ResetPasswordComponent_div_274_small_2_Template, 2, 0, \"small\", 9);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    let tmp_1_0;\n    let tmp_2_0;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", (tmp_1_0 = ctx_r0.resetPasswordForm.get(\"email\")) == null ? null : tmp_1_0.errors == null ? null : tmp_1_0.errors[\"required\"]);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", (tmp_2_0 = ctx_r0.resetPasswordForm.get(\"email\")) == null ? null : tmp_2_0.errors == null ? null : tmp_2_0.errors[\"email\"]);\n  }\n}\nfunction ResetPasswordComponent_div_277_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵtext(1, \"Password is required.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ResetPasswordComponent_div_277_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵtext(1, \"Password must be at least 6 characters long.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ResetPasswordComponent_div_277_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, ResetPasswordComponent_div_277_div_1_Template, 2, 0, \"div\", 12)(2, ResetPasswordComponent_div_277_div_2_Template, 2, 0, \"div\", 12);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    let tmp_1_0;\n    let tmp_2_0;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", (tmp_1_0 = ctx_r0.resetPasswordForm.get(\"password\")) == null ? null : tmp_1_0.errors == null ? null : tmp_1_0.errors[\"required\"]);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", (tmp_2_0 = ctx_r0.resetPasswordForm.get(\"password\")) == null ? null : tmp_2_0.errors == null ? null : tmp_2_0.errors[\"minlength\"]);\n  }\n}\nfunction ResetPasswordComponent_div_280_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵtext(1, \"Passwords must match.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ResetPasswordComponent_div_283_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 17);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.messageSend);\n  }\n}\nfunction ResetPasswordComponent_div_284_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.errorMessage);\n  }\n}\nexport let ResetPasswordComponent = /*#__PURE__*/(() => {\n  class ResetPasswordComponent {\n    constructor(fb, passwordService, route, router) {\n      this.fb = fb;\n      this.passwordService = passwordService;\n      this.route = route;\n      this.router = router;\n      this.token = null; // Initialize the token with null\n      this.messageSend = '';\n      this.errorMessage = '';\n      this.resetPasswordForm = this.fb.group({\n        email: ['', [Validators.required, Validators.email]],\n        password: ['', [Validators.required, Validators.minLength(6)]],\n        confirmPassword: ['', Validators.required]\n      }, {\n        validator: this.passwordMatchValidator\n      });\n    }\n    ngOnInit() {\n      this.route.params.subscribe(params => {\n        this.token = params['token'] ? decodeURIComponent(params['token']) : null;\n      });\n    }\n    passwordMatchValidator(form) {\n      return form.get('password')?.value === form.get('confirmPassword')?.value ? null : {\n        mismatch: true\n      };\n    }\n    onSubmit() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        if (_this.resetPasswordForm.valid) {\n          const request = {\n            email: _this.resetPasswordForm.value.email,\n            token: _this.token,\n            newPassword: _this.resetPasswordForm.value.password,\n            confirmPassword: _this.resetPasswordForm.value.confirmPassword\n          };\n          try {\n            const response = yield firstValueFrom(_this.passwordService.resetPassword(request));\n            _this.messageSend = 'Password reset successful';\n            setTimeout(() => _this.router.navigate(['/landing-page']), 3000);\n          } catch (error) {\n            if (error instanceof HttpErrorResponse) {\n              if (error.error.Errors) {\n                _this.errorMessage = error.error.Errors.join(', ');\n              } else {\n                _this.errorMessage = error.error || 'Error resetting password.';\n              }\n            } else {\n              _this.errorMessage = 'Unexpected error occurred.';\n            }\n          }\n        }\n      })();\n    }\n    static #_ = this.ɵfac = function ResetPasswordComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || ResetPasswordComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.PasswordService), i0.ɵɵdirectiveInject(i3.ActivatedRoute), i0.ɵɵdirectiveInject(i3.Router));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ResetPasswordComponent,\n      selectors: [[\"app-reset-password\"]],\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 285,\n      vars: 7,\n      consts: [[\"href\", i0.ɵɵtrustConstantResourceUrl`/`], [1, \"navbar\", \"navbar-expand-sm\", \"navbar-toggleable-sm\", \"box-shadow\", \"mb-2\"], [1, \"container-fluid\"], [\"routerLink\", \"/\", 1, \"navbar-nav\"], [1, \"container\"], [1, \"form-wrapper\", \"sign-in\"], [3, \"ngSubmit\", \"formGroup\"], [1, \"input-group\"], [\"id\", \"email\", \"formControlName\", \"email\", \"type\", \"email\", \"placeholder\", \"E-mail\", \"required\", \"\"], [4, \"ngIf\"], [\"id\", \"password\", \"formControlName\", \"password\", \"type\", \"password\", \"placeholder\", \"New Password\"], [\"id\", \"confirmPassword\", \"formControlName\", \"confirmPassword\", \"type\", \"password\", \"placeholder\", \"Confirm Password\"], [\"class\", \"msg\", 4, \"ngIf\"], [\"type\", \"submit\", 1, \"btn\", \"mt-4\", 3, \"disabled\"], [\"class\", \"send-message\", 4, \"ngIf\"], [\"class\", \"error-message\", 4, \"ngIf\"], [1, \"msg\"], [1, \"send-message\"], [1, \"error-message\"]],\n      template: function ResetPasswordComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelement(0, \"base\", 0);\n          i0.ɵɵelementStart(1, \"header\")(2, \"nav\", 1)(3, \"div\", 2)(4, \"a\", 3);\n          i0.ɵɵtext(5, \"My Library\");\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(6, \"section\");\n          i0.ɵɵelement(7, \"span\")(8, \"span\")(9, \"span\")(10, \"span\")(11, \"span\")(12, \"span\")(13, \"span\")(14, \"span\")(15, \"span\")(16, \"span\")(17, \"span\")(18, \"span\")(19, \"span\")(20, \"span\")(21, \"span\")(22, \"span\")(23, \"span\")(24, \"span\")(25, \"span\")(26, \"span\")(27, \"span\")(28, \"span\")(29, \"span\")(30, \"span\")(31, \"span\")(32, \"span\")(33, \"span\")(34, \"span\")(35, \"span\")(36, \"span\")(37, \"span\")(38, \"span\")(39, \"span\")(40, \"span\")(41, \"span\")(42, \"span\")(43, \"span\")(44, \"span\")(45, \"span\")(46, \"span\")(47, \"span\")(48, \"span\")(49, \"span\")(50, \"span\")(51, \"span\")(52, \"span\")(53, \"span\")(54, \"span\")(55, \"span\")(56, \"span\")(57, \"span\")(58, \"span\")(59, \"span\")(60, \"span\")(61, \"span\")(62, \"span\")(63, \"span\")(64, \"span\")(65, \"span\")(66, \"span\")(67, \"span\")(68, \"span\")(69, \"span\")(70, \"span\")(71, \"span\")(72, \"span\")(73, \"span\")(74, \"span\")(75, \"span\")(76, \"span\")(77, \"span\")(78, \"span\")(79, \"span\")(80, \"span\")(81, \"span\")(82, \"span\")(83, \"span\")(84, \"span\")(85, \"span\")(86, \"span\")(87, \"span\")(88, \"span\")(89, \"span\")(90, \"span\")(91, \"span\")(92, \"span\")(93, \"span\")(94, \"span\")(95, \"span\")(96, \"span\")(97, \"span\")(98, \"span\")(99, \"span\")(100, \"span\")(101, \"span\")(102, \"span\")(103, \"span\")(104, \"span\")(105, \"span\")(106, \"span\")(107, \"span\")(108, \"span\")(109, \"span\")(110, \"span\")(111, \"span\")(112, \"span\")(113, \"span\")(114, \"span\")(115, \"span\")(116, \"span\")(117, \"span\")(118, \"span\")(119, \"span\")(120, \"span\")(121, \"span\")(122, \"span\")(123, \"span\")(124, \"span\")(125, \"span\")(126, \"span\")(127, \"span\")(128, \"span\")(129, \"span\")(130, \"span\")(131, \"span\")(132, \"span\")(133, \"span\")(134, \"span\")(135, \"span\")(136, \"span\")(137, \"span\")(138, \"span\")(139, \"span\")(140, \"span\")(141, \"span\")(142, \"span\")(143, \"span\")(144, \"span\")(145, \"span\")(146, \"span\")(147, \"span\")(148, \"span\")(149, \"span\")(150, \"span\")(151, \"span\")(152, \"span\")(153, \"span\")(154, \"span\")(155, \"span\")(156, \"span\")(157, \"span\")(158, \"span\")(159, \"span\")(160, \"span\")(161, \"span\")(162, \"span\")(163, \"span\")(164, \"span\")(165, \"span\")(166, \"span\")(167, \"span\")(168, \"span\")(169, \"span\")(170, \"span\")(171, \"span\")(172, \"span\")(173, \"span\")(174, \"span\")(175, \"span\")(176, \"span\")(177, \"span\")(178, \"span\")(179, \"span\")(180, \"span\")(181, \"span\")(182, \"span\")(183, \"span\")(184, \"span\")(185, \"span\")(186, \"span\")(187, \"span\")(188, \"span\")(189, \"span\")(190, \"span\")(191, \"span\")(192, \"span\")(193, \"span\")(194, \"span\")(195, \"span\")(196, \"span\")(197, \"span\")(198, \"span\")(199, \"span\")(200, \"span\")(201, \"span\")(202, \"span\")(203, \"span\")(204, \"span\")(205, \"span\")(206, \"span\")(207, \"span\")(208, \"span\")(209, \"span\")(210, \"span\")(211, \"span\")(212, \"span\")(213, \"span\")(214, \"span\")(215, \"span\")(216, \"span\")(217, \"span\")(218, \"span\")(219, \"span\")(220, \"span\")(221, \"span\")(222, \"span\")(223, \"span\")(224, \"span\")(225, \"span\")(226, \"span\")(227, \"span\")(228, \"span\")(229, \"span\")(230, \"span\")(231, \"span\")(232, \"span\")(233, \"span\")(234, \"span\")(235, \"span\")(236, \"span\")(237, \"span\")(238, \"span\")(239, \"span\")(240, \"span\")(241, \"span\")(242, \"span\")(243, \"span\")(244, \"span\")(245, \"span\")(246, \"span\")(247, \"span\")(248, \"span\")(249, \"span\")(250, \"span\")(251, \"span\")(252, \"span\")(253, \"span\")(254, \"span\")(255, \"span\")(256, \"span\")(257, \"span\")(258, \"span\")(259, \"span\")(260, \"span\")(261, \"span\")(262, \"span\");\n          i0.ɵɵelement(263, \"span\")(264, \"span\")(265, \"span\")(266, \"span\");\n          i0.ɵɵelementStart(267, \"div\", 4)(268, \"div\", 5)(269, \"form\", 6);\n          i0.ɵɵlistener(\"ngSubmit\", function ResetPasswordComponent_Template_form_ngSubmit_269_listener() {\n            return ctx.onSubmit();\n          });\n          i0.ɵɵelementStart(270, \"h2\");\n          i0.ɵɵtext(271, \"Reset Password\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(272, \"div\", 7);\n          i0.ɵɵelement(273, \"input\", 8);\n          i0.ɵɵtemplate(274, ResetPasswordComponent_div_274_Template, 3, 2, \"div\", 9);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(275, \"div\", 7);\n          i0.ɵɵelement(276, \"input\", 10);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(277, ResetPasswordComponent_div_277_Template, 3, 2, \"div\", 9);\n          i0.ɵɵelementStart(278, \"div\", 7);\n          i0.ɵɵelement(279, \"input\", 11);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(280, ResetPasswordComponent_div_280_Template, 2, 0, \"div\", 12);\n          i0.ɵɵelementStart(281, \"button\", 13);\n          i0.ɵɵtext(282, \"Reset Password\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(283, ResetPasswordComponent_div_283_Template, 2, 1, \"div\", 14)(284, ResetPasswordComponent_div_284_Template, 2, 1, \"div\", 15);\n          i0.ɵɵelementEnd()()()();\n        }\n        if (rf & 2) {\n          let tmp_1_0;\n          let tmp_2_0;\n          i0.ɵɵadvance(269);\n          i0.ɵɵproperty(\"formGroup\", ctx.resetPasswordForm);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngIf\", ((tmp_1_0 = ctx.resetPasswordForm.get(\"email\")) == null ? null : tmp_1_0.invalid) && ((tmp_1_0 = ctx.resetPasswordForm.get(\"email\")) == null ? null : tmp_1_0.touched));\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngIf\", ((tmp_2_0 = ctx.resetPasswordForm.get(\"password\")) == null ? null : tmp_2_0.invalid) && (((tmp_2_0 = ctx.resetPasswordForm.get(\"password\")) == null ? null : tmp_2_0.dirty) || ((tmp_2_0 = ctx.resetPasswordForm.get(\"password\")) == null ? null : tmp_2_0.touched)));\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngIf\", ctx.resetPasswordForm.errors == null ? null : ctx.resetPasswordForm.errors[\"mismatch\"]);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"disabled\", ctx.resetPasswordForm.invalid);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.messageSend);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.errorMessage);\n        }\n      },\n      dependencies: [CommonModule, i4.NgIf, ReactiveFormsModule, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.RequiredValidator, i1.FormGroupDirective, i1.FormControlName],\n      styles: [\".container[_ngcontent-%COMP%]{position:absolute;width:400px;height:480px;justify-content:center;background:#000;box-shadow:0 0 50px #0ef;border-radius:20px;padding:40px;overflow:hidden;z-index:1000;top:25vh}.container[_ngcontent-%COMP%]:hover{animation:_ngcontent-%COMP%_animateColorChange 6s linear infinite}@keyframes _ngcontent-%COMP%_animateColorChange{0%{filter:hue-rotate(0deg)}25%{filter:hue-rotate(270deg)}50%{filter:hue-rotate(300deg)}75%{filter:hue-rotate(180deg)}to{filter:hue-rotate(360deg)}}.form-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;height:420px;transition:1s ease-in-out}h2[_ngcontent-%COMP%]{font-size:30px;color:#fff;text-align:center}.input-group[_ngcontent-%COMP%]{position:relative;margin:30px 0;border-bottom:2px solid #fff}.input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;top:50%;left:5px;transform:translateY(-50%);font-size:16px;color:#fff;pointer-events:none;transition:.5s}.input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:320px;height:40px;font-size:16px;color:#fff;padding:0 5px;background:transparent;border:none;outline:none}.input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus ~ label[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:valid ~ label[_ngcontent-%COMP%]{top:-5px}button[_ngcontent-%COMP%]{position:relative;width:100%;height:40px;background:#0ef;box-shadow:0 0 10px #0ef;font-size:16px;color:#000;font-weight:500;cursor:pointer;border-radius:30px;border:none;outline:none}button[_ngcontent-%COMP%]:hover{color:#0ef}button[_ngcontent-%COMP%]:disabled{color:#0ef}.error-message[_ngcontent-%COMP%]{color:#0ef;margin-top:8px}.send-message[_ngcontent-%COMP%]{margin-top:8px;color:#0ef;text-align:center;font-weight:700}small[_ngcontent-%COMP%]{color:#0ef}.msg[_ngcontent-%COMP%]{color:red}\"]\n    });\n  }\n  return ResetPasswordComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}