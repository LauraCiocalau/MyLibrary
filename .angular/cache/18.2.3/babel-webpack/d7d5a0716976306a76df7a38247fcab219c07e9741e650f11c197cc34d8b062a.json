{"ast":null,"code":"import { FormBuilder, ReactiveFormsModule, Validators } from '@angular/forms';\nimport { HomeService } from '../../services/home.service';\nimport { Genre, Status } from '../../models/book.model';\nimport { catchError, finalize, takeUntil } from 'rxjs/operators';\nimport { Subject, throwError } from 'rxjs';\nimport { CommonModule } from '@angular/common';\nimport { HttpEventType } from '@angular/common/http';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../../services/home.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nfunction EditBookComponent_form_4_option_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 26);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const genre_r3 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", genre_r3);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(genre_r3);\n  }\n}\nfunction EditBookComponent_form_4_option_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 26);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const status_r4 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", status_r4);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(status_r4);\n  }\n}\nfunction EditBookComponent_form_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"form\", 5);\n    i0.ɵɵlistener(\"ngSubmit\", function EditBookComponent_form_4_Template_form_ngSubmit_0_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.onFormSubmit());\n    });\n    i0.ɵɵelementStart(1, \"div\", 6)(2, \"label\", 7);\n    i0.ɵɵtext(3, \"Title\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(4, \"input\", 8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 6)(6, \"label\", 9);\n    i0.ɵɵtext(7, \"Author\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(8, \"input\", 10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"div\", 6)(10, \"label\", 11);\n    i0.ɵɵtext(11, \"ISBN\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(12, \"input\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"div\", 6)(14, \"label\", 13);\n    i0.ɵɵtext(15, \"Published Year\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(16, \"input\", 14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"div\", 6)(18, \"label\", 15);\n    i0.ɵɵtext(19, \"Nr. of Pages\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(20, \"input\", 16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"div\", 6)(22, \"label\", 17);\n    i0.ɵɵtext(23, \"Genre\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"select\", 18);\n    i0.ɵɵtemplate(25, EditBookComponent_form_4_option_25_Template, 2, 2, \"option\", 19);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(26, \"div\", 6)(27, \"label\", 20);\n    i0.ɵɵtext(28, \"Image\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(29, \"input\", 21);\n    i0.ɵɵlistener(\"change\", function EditBookComponent_form_4_Template_input_change_29_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.onFileSelected($event));\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(30, \"div\", 6)(31, \"label\", 22);\n    i0.ɵɵtext(32, \"Status:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(33, \"select\", 23);\n    i0.ɵɵtemplate(34, EditBookComponent_form_4_option_34_Template, 2, 2, \"option\", 19);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(35, \"div\", 6)(36, \"button\", 24);\n    i0.ɵɵtext(37, \" Update book \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(38, \"a\", 25);\n    i0.ɵɵtext(39, \"Back\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"formGroup\", ctx_r1.booksForm);\n    i0.ɵɵadvance(25);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.genres);\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.statuses);\n  }\n}\nexport let EditBookComponent = /*#__PURE__*/(() => {\n  class EditBookComponent {\n    constructor(fb, homeService, route, router) {\n      this.fb = fb;\n      this.homeService = homeService;\n      this.route = route;\n      this.router = router;\n      this.genres = Object.keys(Genre).filter(key => isNaN(Number(key)));\n      this.statuses = Object.keys(Status).filter(key => isNaN(Number(key)));\n      this.isLoading = false;\n      this.unsubscribe$ = new Subject();\n    }\n    ngOnInit() {\n      this.booksForm = this.fb.group({\n        title: ['', Validators.required],\n        author: ['', Validators.required],\n        isbn: [''],\n        publishedYear: [''],\n        numberOfPages: [''],\n        image: [''],\n        genre: ['', Validators.required],\n        status: [0, Validators.required]\n      });\n      // Obține ID-ul cărții din parametrii rutei și convertește-l la litere mari\n      const bookIdFromRoute = this.route.snapshot.paramMap.get('id') || '';\n      this.bookId = bookIdFromRoute.toUpperCase();\n      // Fetch book details\n      if (this.bookId) {\n        this.homeService.getBookById(this.bookId).subscribe(book => {\n          console.log('Fetched book:', book);\n          this.booksForm.patchValue({\n            title: book.title,\n            author: book.author,\n            isbn: book.isbn,\n            publishedYear: book.publishedYear,\n            numberOfPages: book.numberOfPages,\n            genre: book.genre,\n            status: book.status\n          });\n          console.log('Fetched book genre:', book.genre);\n        }, error => {\n          console.error('Error fetching book:', error);\n          alert('Could not fetch book details. Please try again later.');\n        });\n      }\n    }\n    onFormSubmit() {\n      console.log('Form submitted');\n      if (this.booksForm.invalid) {\n        console.log('Form is invalid');\n        this.showFormValidationErrors();\n        return;\n      }\n      console.log('Form is valid, preparing data');\n      this.isLoading = true;\n      const formData = new FormData();\n      Object.keys(this.booksForm.value).forEach(key => {\n        const value = key === 'genre' ? Genre[this.booksForm.get(key)?.value] : this.booksForm.get(key)?.value;\n        formData.append(key, value);\n      });\n      const imageControl = this.booksForm.get('image');\n      if (imageControl?.value) {\n        formData.append('image', imageControl.value);\n      } else {\n        const defaultImagePath = '/img/default.jpg';\n        formData.append('image', defaultImagePath);\n      }\n      this.homeService.updateBook(this.bookId, formData).pipe(catchError(error => {\n        console.error('Error Details:', error);\n        if (error.error && error.error.message) {\n          alert(`Something went wrong: ${error.error.message}`);\n        } else {\n          alert(`Something went wrong: ${error.message}`);\n        }\n        return throwError(() => new Error(`Something went wrong: ${error.message}`));\n      }), finalize(() => {\n        this.isLoading = false;\n      }), takeUntil(this.unsubscribe$)).subscribe({\n        next: event => {\n          if (event.type === HttpEventType.Response) {\n            console.log('Update response:', event.body);\n            console.log('Navigating to home page...');\n            this.router.navigate(['/home-page']);\n          } else {\n            console.log('Event type:', event.type); // Log other event types if necessary\n          }\n        },\n        error: err => {\n          console.error('Error:', err);\n          alert('An error occurred while submitting the form. Please try again later.');\n        }\n      });\n    }\n    showFormValidationErrors() {\n      for (const control in this.booksForm.controls) {\n        if (this.booksForm.controls.hasOwnProperty(control)) {\n          const ctrl = this.booksForm.controls[control];\n          if (ctrl.invalid) {\n            console.log(`Control ${control} is invalid`);\n          }\n          ctrl.markAsTouched();\n        }\n      }\n    }\n    ngOnDestroy() {\n      this.unsubscribe$.next();\n      this.unsubscribe$.complete();\n    }\n    onFileSelected(event) {\n      const input = event.target;\n      if (input.files && input.files.length > 0) {\n        this.booksForm.patchValue({\n          image: input.files[0]\n        });\n      }\n    }\n    static #_ = this.ɵfac = function EditBookComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || EditBookComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.HomeService), i0.ɵɵdirectiveInject(i3.ActivatedRoute), i0.ɵɵdirectiveInject(i3.Router));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: EditBookComponent,\n      selectors: [[\"app-edit-book\"]],\n      inputs: {\n        bookId: \"bookId\"\n      },\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 5,\n      vars: 1,\n      consts: [[1, \"landing-content\"], [1, \"flex\", \"h-screen\"], [1, \"books\"], [1, \"form-container\"], [\"class\", \"px-4\", 3, \"formGroup\", \"ngSubmit\", 4, \"ngIf\"], [1, \"px-4\", 3, \"ngSubmit\", \"formGroup\"], [1, \"mt-2\", \"fields\"], [\"for\", \"title\", 1, \"font-bold\", \"text-white\"], [\"type\", \"text\", \"id\", \"title\", \"formControlName\", \"title\", 1, \"w-full\", \"p-2\", \"border-2\", \"rounded-sm\", \"mt-2\"], [\"for\", \"author\", 1, \"font-bold\", \"text-white\"], [\"type\", \"text\", \"id\", \"author\", \"formControlName\", \"author\", 1, \"w-full\", \"p-2\", \"border-2\", \"rounded-sm\", \"mt-2\"], [\"for\", \"isbn\", 1, \"font-bold\", \"text-white\"], [\"type\", \"text\", \"id\", \"isbn\", \"formControlName\", \"isbn\", 1, \"w-full\", \"p-2\", \"border-2\", \"rounded-sm\", \"mt-2\"], [\"for\", \"publishedYear\", 1, \"font-bold\", \"text-white\"], [\"type\", \"text\", \"id\", \"publishedYear\", \"formControlName\", \"publishedYear\", 1, \"w-full\", \"p-2\", \"border-2\", \"rounded-sm\", \"mt-2\"], [\"for\", \"numberOfPages\", 1, \"font-bold\", \"text-white\"], [\"type\", \"number\", \"id\", \"numberOfPages\", \"formControlName\", \"numberOfPages\", 1, \"w-full\", \"p-2\", \"border-2\", \"rounded-sm\", \"mt-2\"], [\"for\", \"genre\", 1, \"font-bold\", \"text-white\"], [\"id\", \"genre\", \"formControlName\", \"genre\", 1, \"w-full\", \"p-2\", \"border-2\", \"rounded-sm\", \"mt-2\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"for\", \"image\", 1, \"font-bold\", \"text-white\"], [\"type\", \"file\", \"id\", \"image\", 1, \"w-full\", \"p-2\", \"border-2\", \"rounded-sm\", \"mt-2\", 3, \"change\"], [\"for\", \"status\", 1, \"font-bold\", \"text-white\"], [\"id\", \"status\", \"formControlName\", \"status\"], [\"type\", \"submit\", 1, \"btn\", \"mp-4\"], [\"href\", \"../home-page\", 1, \"link-back\"], [3, \"value\"]],\n      template: function EditBookComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3);\n          i0.ɵɵtemplate(4, EditBookComponent_form_4_Template, 40, 3, \"form\", 4);\n          i0.ɵɵelementEnd()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngIf\", ctx.booksForm);\n        }\n      },\n      dependencies: [ReactiveFormsModule, i1.ɵNgNoValidate, i1.NgSelectOption, i1.ɵNgSelectMultipleOption, i1.DefaultValueAccessor, i1.NumberValueAccessor, i1.SelectControlValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, CommonModule, i4.NgForOf, i4.NgIf],\n      styles: [\".book-image[_ngcontent-%COMP%] {\\n    min-width: 120px;\\n    max-height: 180px;\\n    padding-bottom: 10px;\\n  }\\n\\n\\n.landing-content[_ngcontent-%COMP%]{\\n  position:absolute;\\n  top: 10vh;\\n  left: 3%;\\n  width: fit-content;\\n  background: #222;  \\n  z-index: 2000;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  padding: 10px;\\n  padding-top: 18px;\\n  border-radius: 4px;\\n  box-shadow: 0 15px 35px rgba(0,0,0,9);\\n  height: fit-content;\\n}\\n\\n\\n.fields[_ngcontent-%COMP%]{\\nposition: relative;\\n}\\n\\ninput[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{\\n  width: 100% !important;\\n  color: #000;\\n  font-weight: bold;\\n}\\n\\nbutton[_ngcontent-%COMP%] {\\n  position: relative;\\n  width: 70%;\\n  height: 40px;\\n  background: #0ef;\\n  box-shadow: 0 0 10px rgb(197, 6, 95);\\n  font-size: 16px;\\n  color: #000;\\n  font-weight: 500;\\n  cursor: pointer;\\n  border-radius: 30px;\\n  border: none;\\n  outline: none;\\n}\\n\\nbutton[_ngcontent-%COMP%]:hover{\\n  background-color: black;\\n  color: #0ef;\\n  box-shadow: 0 0 10px rgb(197, 6, 95);\\n}\\n\\n.link-back[_ngcontent-%COMP%]{\\n  margin-left: 50px;\\n  color: #0ef;\\n}\\n\\n.link-back[_ngcontent-%COMP%]:hover{\\n  color: rgb(197, 6, 95);\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGFnZXMvZWRpdC1ib29rL2VkaXQtYm9vay5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBRUE7SUFDSSxnQkFBZ0I7SUFDaEIsaUJBQWlCO0lBQ2pCLG9CQUFvQjtFQUN0Qjs7O0FBR0Y7RUFDRSxpQkFBaUI7RUFDakIsU0FBUztFQUNULFFBQVE7RUFDUixrQkFBa0I7RUFDbEIsZ0JBQWdCO0VBQ2hCLGFBQWE7RUFDYixhQUFhO0VBQ2IsdUJBQXVCO0VBQ3ZCLG1CQUFtQjtFQUNuQixhQUFhO0VBQ2IsaUJBQWlCO0VBQ2pCLGtCQUFrQjtFQUNsQixxQ0FBcUM7RUFDckMsbUJBQW1CO0FBQ3JCOzs7QUFHQTtBQUNBLGtCQUFrQjtBQUNsQjs7QUFFQTtFQUNFLHNCQUFzQjtFQUN0QixXQUFXO0VBQ1gsaUJBQWlCO0FBQ25COztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLFVBQVU7RUFDVixZQUFZO0VBQ1osZ0JBQWdCO0VBQ2hCLG9DQUFvQztFQUNwQyxlQUFlO0VBQ2YsV0FBVztFQUNYLGdCQUFnQjtFQUNoQixlQUFlO0VBQ2YsbUJBQW1CO0VBQ25CLFlBQVk7RUFDWixhQUFhO0FBQ2Y7O0FBRUE7RUFDRSx1QkFBdUI7RUFDdkIsV0FBVztFQUNYLG9DQUFvQztBQUN0Qzs7QUFFQTtFQUNFLGlCQUFpQjtFQUNqQixXQUFXO0FBQ2I7O0FBRUE7RUFDRSxzQkFBc0I7QUFDeEIiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuXHJcbi5ib29rLWltYWdlIHtcclxuICAgIG1pbi13aWR0aDogMTIwcHg7XHJcbiAgICBtYXgtaGVpZ2h0OiAxODBweDtcclxuICAgIHBhZGRpbmctYm90dG9tOiAxMHB4O1xyXG4gIH1cclxuXHJcblxyXG4ubGFuZGluZy1jb250ZW50e1xyXG4gIHBvc2l0aW9uOmFic29sdXRlO1xyXG4gIHRvcDogMTB2aDtcclxuICBsZWZ0OiAzJTtcclxuICB3aWR0aDogZml0LWNvbnRlbnQ7XHJcbiAgYmFja2dyb3VuZDogIzIyMjsgIFxyXG4gIHotaW5kZXg6IDIwMDA7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gIHBhZGRpbmc6IDEwcHg7XHJcbiAgcGFkZGluZy10b3A6IDE4cHg7XHJcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xyXG4gIGJveC1zaGFkb3c6IDAgMTVweCAzNXB4IHJnYmEoMCwwLDAsOSk7XHJcbiAgaGVpZ2h0OiBmaXQtY29udGVudDtcclxufVxyXG5cclxuXHJcbi5maWVsZHN7XHJcbnBvc2l0aW9uOiByZWxhdGl2ZTtcclxufVxyXG5cclxuaW5wdXQsIHNlbGVjdHtcclxuICB3aWR0aDogMTAwJSAhaW1wb3J0YW50O1xyXG4gIGNvbG9yOiAjMDAwO1xyXG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG59XHJcblxyXG5idXR0b24ge1xyXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICB3aWR0aDogNzAlO1xyXG4gIGhlaWdodDogNDBweDtcclxuICBiYWNrZ3JvdW5kOiAjMGVmO1xyXG4gIGJveC1zaGFkb3c6IDAgMCAxMHB4IHJnYigxOTcsIDYsIDk1KTtcclxuICBmb250LXNpemU6IDE2cHg7XHJcbiAgY29sb3I6ICMwMDA7XHJcbiAgZm9udC13ZWlnaHQ6IDUwMDtcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgYm9yZGVyLXJhZGl1czogMzBweDtcclxuICBib3JkZXI6IG5vbmU7XHJcbiAgb3V0bGluZTogbm9uZTtcclxufVxyXG5cclxuYnV0dG9uOmhvdmVye1xyXG4gIGJhY2tncm91bmQtY29sb3I6IGJsYWNrO1xyXG4gIGNvbG9yOiAjMGVmO1xyXG4gIGJveC1zaGFkb3c6IDAgMCAxMHB4IHJnYigxOTcsIDYsIDk1KTtcclxufVxyXG5cclxuLmxpbmstYmFja3tcclxuICBtYXJnaW4tbGVmdDogNTBweDtcclxuICBjb2xvcjogIzBlZjtcclxufVxyXG5cclxuLmxpbmstYmFjazpob3ZlcntcclxuICBjb2xvcjogcmdiKDE5NywgNiwgOTUpO1xyXG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n    });\n  }\n  return EditBookComponent;\n})();","map":{"version":3,"names":["FormBuilder","ReactiveFormsModule","Validators","HomeService","Genre","Status","catchError","finalize","takeUntil","Subject","throwError","CommonModule","HttpEventType","ActivatedRoute","Router","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵproperty","genre_r3","ɵɵadvance","ɵɵtextInterpolate","status_r4","ɵɵlistener","EditBookComponent_form_4_Template_form_ngSubmit_0_listener","ɵɵrestoreView","_r1","ctx_r1","ɵɵnextContext","ɵɵresetView","onFormSubmit","ɵɵelement","ɵɵtemplate","EditBookComponent_form_4_option_25_Template","EditBookComponent_form_4_Template_input_change_29_listener","$event","onFileSelected","EditBookComponent_form_4_option_34_Template","booksForm","genres","statuses","EditBookComponent","constructor","fb","homeService","route","router","Object","keys","filter","key","isNaN","Number","isLoading","unsubscribe$","ngOnInit","group","title","required","author","isbn","publishedYear","numberOfPages","image","genre","status","bookIdFromRoute","snapshot","paramMap","get","bookId","toUpperCase","getBookById","subscribe","book","console","log","patchValue","error","alert","invalid","showFormValidationErrors","formData","FormData","value","forEach","append","imageControl","defaultImagePath","updateBook","pipe","message","Error","next","event","type","Response","body","navigate","err","control","controls","hasOwnProperty","ctrl","markAsTouched","ngOnDestroy","complete","input","target","files","length","_","ɵɵdirectiveInject","i1","i2","i3","_2","selectors","inputs","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","EditBookComponent_Template","rf","ctx","EditBookComponent_form_4_Template","ɵNgNoValidate","NgSelectOption","ɵNgSelectMultipleOption","DefaultValueAccessor","NumberValueAccessor","SelectControlValueAccessor","NgControlStatus","NgControlStatusGroup","FormGroupDirective","FormControlName","i4","NgForOf","NgIf","styles"],"sources":["C:\\Users\\laura\\Desktop\\ProjectAngular.Net\\MyLibrary\\UI\\library.web\\src\\app\\pages\\edit-book\\edit-book.component.ts","C:\\Users\\laura\\Desktop\\ProjectAngular.Net\\MyLibrary\\UI\\library.web\\src\\app\\pages\\edit-book\\edit-book.component.html"],"sourcesContent":["import { Component, Input, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup, ReactiveFormsModule, Validators } from '@angular/forms';\r\nimport { HomeService } from '../../services/home.service';\r\nimport { Genre, Status } from '../../models/book.model';\r\nimport { catchError, finalize, takeUntil } from 'rxjs/operators';\r\nimport { Subject, throwError } from 'rxjs';\r\nimport { CommonModule } from '@angular/common';\r\nimport { HttpEventType } from '@angular/common/http';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-edit-book',\r\n  templateUrl: './edit-book.component.html',\r\n  styleUrls: ['./edit-book.component.css'],\r\n  standalone: true,\r\n  imports: [ReactiveFormsModule, CommonModule]\r\n})\r\nexport class EditBookComponent implements OnInit {\r\n  @Input() bookId!: string;\r\n  booksForm!: FormGroup;\r\n  genres: string[] = Object.keys(Genre).filter(key => isNaN(Number(key)));\r\n  statuses: string[] = Object.keys(Status).filter(key => isNaN(Number(key)));\r\n  isLoading = false;\r\n  private unsubscribe$ = new Subject<void>();\r\n\r\n  constructor(private fb: FormBuilder, private homeService: HomeService, private route: ActivatedRoute, private router: Router) { }\r\n\r\n  ngOnInit(): void {\r\n    this.booksForm = this.fb.group({\r\n      title: ['', Validators.required],\r\n      author: ['', Validators.required],\r\n      isbn: [''],\r\n      publishedYear: [''],\r\n      numberOfPages: [''],\r\n      image: [''],\r\n      genre: ['', Validators.required],\r\n      status: [0, Validators.required]\r\n    });\r\n  \r\n    // Obține ID-ul cărții din parametrii rutei și convertește-l la litere mari\r\n    const bookIdFromRoute = this.route.snapshot.paramMap.get('id') || '';\r\nthis.bookId = bookIdFromRoute.toUpperCase();\r\n  \r\n    // Fetch book details\r\n    if (this.bookId) {\r\n      this.homeService.getBookById(this.bookId).subscribe(\r\n        book => {\r\n          console.log('Fetched book:', book);\r\n          this.booksForm.patchValue({\r\n            title: book.title,\r\n            author: book.author,\r\n            isbn: book.isbn,\r\n            publishedYear: book.publishedYear,\r\n            numberOfPages: book.numberOfPages,\r\n            genre: book.genre,\r\n            status: book.status\r\n          });\r\n          console.log('Fetched book genre:', book.genre);\r\n        },\r\n        error => {\r\n          console.error('Error fetching book:', error);\r\n          alert('Could not fetch book details. Please try again later.');\r\n        }\r\n      );\r\n    }\r\n  }\r\n\r\n  onFormSubmit(): void {\r\n      console.log('Form submitted');\r\n      if (this.booksForm.invalid) {\r\n          console.log('Form is invalid');\r\n          this.showFormValidationErrors();\r\n          return;\r\n      }\r\n      console.log('Form is valid, preparing data');\r\n    this.isLoading = true;\r\n    const formData = new FormData();\r\n    Object.keys(this.booksForm.value).forEach(key => {\r\n      const value = key === 'genre' ? Genre[this.booksForm.get(key)?.value] : this.booksForm.get(key)?.value;\r\n      formData.append(key, value as string);\r\n    });\r\n\r\n    const imageControl = this.booksForm.get('image');\r\n    if (imageControl?.value) {\r\n      formData.append('image', imageControl.value);\r\n    } else {\r\n      const defaultImagePath = '/img/default.jpg';\r\n      formData.append('image', defaultImagePath);\r\n    }\r\n\r\n    this.homeService.updateBook(this.bookId, formData)\r\n    .pipe(\r\n      catchError(error => {\r\n        console.error('Error Details:', error);\r\n        if (error.error && error.error.message) {\r\n          alert(`Something went wrong: ${error.error.message}`);\r\n        } else {\r\n          alert(`Something went wrong: ${error.message}`);\r\n        }\r\n        return throwError(() => new Error(`Something went wrong: ${error.message}`));\r\n      }),\r\n      finalize(() => {\r\n        this.isLoading = false;\r\n      }),\r\n      takeUntil(this.unsubscribe$)\r\n    )\r\n    .subscribe({\r\n      next: (event) => {\r\n        if (event.type === HttpEventType.Response) {\r\n            console.log('Update response:', event.body);\r\n            console.log('Navigating to home page...');\r\n            this.router.navigate(['/home-page']);\r\n        } else {\r\n            console.log('Event type:', event.type); // Log other event types if necessary\r\n        }\r\n      },\r\n      error: (err) => {\r\n        console.error('Error:', err);\r\n        alert('An error occurred while submitting the form. Please try again later.');\r\n      }\r\n    });\r\n  }\r\n\r\n  showFormValidationErrors(): void {\r\n    for (const control in this.booksForm.controls) {\r\n        if (this.booksForm.controls.hasOwnProperty(control)) {\r\n            const ctrl = this.booksForm.controls[control];\r\n            if (ctrl.invalid) {\r\n                console.log(`Control ${control} is invalid`);\r\n            }\r\n            ctrl.markAsTouched();\r\n        }\r\n    }\r\n}\r\n\r\n  ngOnDestroy(): void {\r\n    this.unsubscribe$.next();\r\n    this.unsubscribe$.complete();\r\n  }\r\n\r\n  onFileSelected(event: Event): void {\r\n    const input = event.target as HTMLInputElement;\r\n    if (input.files && input.files.length > 0) {\r\n      this.booksForm.patchValue({ image: input.files[0] });\r\n    }\r\n  }\r\n}","<div class=\"landing-content\">\r\n\r\n  <div class=\"flex h-screen\">\r\n    <!-- Container pentru formular și lista de cărți -->\r\n    <div class=\"books\">\r\n      <!-- Form for editing a book -->\r\n      <div class=\"form-container\">\r\n        <form *ngIf=\"booksForm\" (ngSubmit)=\"onFormSubmit()\" [formGroup]=\"booksForm\" class=\"px-4\">\r\n\r\n          <!-- Title Field -->\r\n          <div class=\"mt-2 fields\">\r\n            <label for=\"title\" class=\"font-bold text-white\">Title</label>\r\n            <input type=\"text\" id=\"title\" class=\"w-full p-2 border-2 rounded-sm mt-2\" formControlName=\"title\">\r\n          </div>\r\n\r\n          <!-- Author Field -->\r\n          <div class=\"mt-2 fields\">\r\n            <label for=\"author\" class=\"font-bold text-white\">Author</label>\r\n            <input type=\"text\" id=\"author\" class=\"w-full p-2 border-2 rounded-sm mt-2\" formControlName=\"author\">\r\n          </div>\r\n\r\n          <!-- ISBN Field -->\r\n          <div class=\"mt-2 fields\">\r\n            <label for=\"isbn\" class=\"font-bold text-white\">ISBN</label>\r\n            <input type=\"text\" id=\"isbn\" class=\"w-full p-2 border-2 rounded-sm mt-2\" formControlName=\"isbn\">\r\n          </div>\r\n\r\n          <!-- Published Year Field -->\r\n          <div class=\"mt-2 fields\">\r\n            <label for=\"publishedYear\" class=\"font-bold text-white\">Published Year</label>\r\n            <input type=\"text\" id=\"publishedYear\" class=\"w-full p-2 border-2 rounded-sm mt-2\"\r\n              formControlName=\"publishedYear\">\r\n          </div>\r\n\r\n          <!-- Number of Pages Field -->\r\n          <div class=\"mt-2 fields\">\r\n            <label for=\"numberOfPages\" class=\"font-bold text-white\">Nr. of Pages</label>\r\n            <input type=\"number\" id=\"numberOfPages\" class=\"w-full p-2 border-2 rounded-sm mt-2\"\r\n              formControlName=\"numberOfPages\">\r\n          </div>\r\n\r\n          <!-- Genre Field -->\r\n          <div class=\"mt-2 fields\">\r\n            <label for=\"genre\" class=\"font-bold text-white\">Genre</label>\r\n            <select id=\"genre\" class=\"w-full p-2 border-2 rounded-sm mt-2\" formControlName=\"genre\">\r\n              <option *ngFor=\"let genre of genres\" [value]=\"genre\">{{genre}}</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div class=\"mt-2 fields\">\r\n            <label for=\"image\" class=\"font-bold text-white\">Image</label>\r\n            <input type=\"file\" id=\"image\" (change)=\"onFileSelected($event)\" class=\"w-full p-2 border-2 rounded-sm mt-2\">\r\n          </div>\r\n          <!-- Status Field -->\r\n          <div class=\"mt-2 fields\">\r\n            <label for=\"status\" class=\"font-bold text-white\">Status:</label>\r\n            <select id=\"status\" formControlName=\"status\">\r\n              <option *ngFor=\"let status of statuses\" [value]=\"status\">{{status}}</option>\r\n            </select>\r\n          </div>\r\n        \r\n          <!-- Submit Button -->\r\n          <div class=\"mt-2 fields\">\r\n            <button type=\"submit\" class=\"btn mp-4\">\r\n              Update book\r\n            </button>\r\n            <a href=\"../home-page\" class=\"link-back\">Back</a>\r\n          </div>\r\n          \r\n        </form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}