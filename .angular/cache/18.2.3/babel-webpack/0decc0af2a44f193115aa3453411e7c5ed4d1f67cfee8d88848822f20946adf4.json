{"ast":null,"code":"import { inject } from '@angular/core';\nimport { Router, RouterOutlet } from '@angular/router';\nimport { MatDialog } from '@angular/material/dialog';\nimport { ProfileModalComponent } from '../../modals/profile-modal/profile-modal.component';\nimport { AuthService } from '../../services/auth.service';\nimport { HttpClient } from '@angular/common/http';\nimport { CommonModule } from '@angular/common';\nimport { AboutModalComponent } from '../../modals/about-modal/about-modal.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/auth.service\";\nimport * as i2 from \"@angular/material/dialog\";\nimport * as i3 from \"@angular/common/http\";\nexport let HeaderComponent = /*#__PURE__*/(() => {\n  class HeaderComponent {\n    constructor(authService, dialog, http) {\n      this.authService = authService;\n      this.dialog = dialog;\n      this.http = http;\n      this.userId = null; // Initialize userId\n      this.router = inject(Router);\n    }\n    ngOnInit() {\n      this.authService.getUserId().subscribe({\n        next: data => {\n          this.userId = data.userId; // Set userId from API response\n          console.log('User ID:', this.userId);\n        },\n        error: err => {\n          if (err.status === 404) {\n            console.log('User not found, redirecting to landing page...');\n            this.router.navigate(['/landing-page']); // Redirect to landing page\n          } else {\n            console.error('Error fetching user ID:', err);\n          }\n        }\n      });\n    }\n    onLogout() {\n      console.log('Logging out...');\n      localStorage.removeItem('token');\n      sessionStorage.removeItem('token');\n      console.log('Token removed. Redirecting to login page.');\n      this.router.navigateByUrl(\"/landing-page\");\n    }\n    openProfileModal() {\n      this.openUserModal(ProfileModalComponent);\n    }\n    openAboutModal() {\n      this.openUserModal(AboutModalComponent);\n    }\n    openUserModal(modalComponent) {\n      if (!this.userId) {\n        console.error('User ID is undefined'); // Error handling if userId is not set\n        return;\n      }\n      this.authService.getUserDetails().subscribe({\n        next: userData => {\n          this.dialog.open(modalComponent, {\n            data: {\n              userName: userData.userName,\n              email: userData.email\n            }\n          });\n        },\n        error: err => {\n          console.error('Error fetching user details:', err);\n          // Consider adding user feedback here, e.g., a notification.\n        }\n      });\n    }\n    static #_ = this.ɵfac = function HeaderComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || HeaderComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.MatDialog), i0.ɵɵdirectiveInject(i3.HttpClient));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: HeaderComponent,\n      selectors: [[\"app-header\"]],\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 280,\n      vars: 0,\n      consts: [[1, \"navbar\", \"navbar-expand-sm\", \"navbar-toggleable-sm\", \"box-shadow\", \"mb-2\"], [1, \"container-fluid\"], [\"routerLink\", \"/landing-page\", 1, \"navbar-nav\"], [\"type\", \"button\", \"data-bs-toggle\", \"collapse\", \"data-bs-target\", \".navbar-collapse\", \"aria-controls\", \"navbarSupportedContent\", \"aria-expanded\", \"false\", \"aria-label\", \"Toggle navigation\", 1, \"navbar-toggler\"], [1, \"navbar-toggler-icon\"], [1, \"nav-flex\"], [1, \"dropdown\"], [1, \"dropbtn\"], [1, \"dropdown-content\"], [\"href\", \"#\", 3, \"click\"]],\n      template: function HeaderComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"header\")(1, \"nav\", 0)(2, \"div\", 1)(3, \"a\", 2);\n          i0.ɵɵtext(4, \"My Library\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(5, \"button\", 3);\n          i0.ɵɵelement(6, \"span\", 4);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(7, \"ul\", 5)(8, \"li\", 6)(9, \"button\", 7);\n          i0.ɵɵtext(10, \"Menu\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(11, \"div\", 8)(12, \"a\", 9);\n          i0.ɵɵlistener(\"click\", function HeaderComponent_Template_a_click_12_listener() {\n            return ctx.openProfileModal();\n          });\n          i0.ɵɵtext(13, \"Profile\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(14, \"a\", 9);\n          i0.ɵɵlistener(\"click\", function HeaderComponent_Template_a_click_14_listener() {\n            return ctx.openAboutModal();\n          });\n          i0.ɵɵtext(15, \"About\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(16, \"a\", 9);\n          i0.ɵɵlistener(\"click\", function HeaderComponent_Template_a_click_16_listener() {\n            return ctx.onLogout();\n          });\n          i0.ɵɵtext(17, \"Logout\");\n          i0.ɵɵelementEnd()()()()()()();\n          i0.ɵɵelementStart(18, \"section\");\n          i0.ɵɵelement(19, \"span\")(20, \"span\")(21, \"span\")(22, \"span\")(23, \"span\")(24, \"span\")(25, \"span\")(26, \"span\")(27, \"span\")(28, \"span\")(29, \"span\")(30, \"span\")(31, \"span\")(32, \"span\")(33, \"span\")(34, \"span\")(35, \"span\")(36, \"span\")(37, \"span\")(38, \"span\")(39, \"span\")(40, \"span\")(41, \"span\")(42, \"span\")(43, \"span\")(44, \"span\")(45, \"span\")(46, \"span\")(47, \"span\")(48, \"span\")(49, \"span\")(50, \"span\")(51, \"span\")(52, \"span\")(53, \"span\")(54, \"span\")(55, \"span\")(56, \"span\")(57, \"span\")(58, \"span\")(59, \"span\")(60, \"span\")(61, \"span\")(62, \"span\")(63, \"span\")(64, \"span\")(65, \"span\")(66, \"span\")(67, \"span\")(68, \"span\")(69, \"span\")(70, \"span\")(71, \"span\")(72, \"span\")(73, \"span\")(74, \"span\")(75, \"span\")(76, \"span\")(77, \"span\")(78, \"span\")(79, \"span\")(80, \"span\")(81, \"span\")(82, \"span\")(83, \"span\")(84, \"span\")(85, \"span\")(86, \"span\")(87, \"span\")(88, \"span\")(89, \"span\")(90, \"span\")(91, \"span\")(92, \"span\")(93, \"span\")(94, \"span\")(95, \"span\")(96, \"span\")(97, \"span\")(98, \"span\")(99, \"span\")(100, \"span\")(101, \"span\")(102, \"span\")(103, \"span\")(104, \"span\")(105, \"span\")(106, \"span\")(107, \"span\")(108, \"span\")(109, \"span\")(110, \"span\")(111, \"span\")(112, \"span\")(113, \"span\")(114, \"span\")(115, \"span\")(116, \"span\")(117, \"span\")(118, \"span\")(119, \"span\")(120, \"span\")(121, \"span\")(122, \"span\")(123, \"span\")(124, \"span\")(125, \"span\")(126, \"span\")(127, \"span\")(128, \"span\")(129, \"span\")(130, \"span\")(131, \"span\")(132, \"span\")(133, \"span\")(134, \"span\")(135, \"span\")(136, \"span\")(137, \"span\")(138, \"span\")(139, \"span\")(140, \"span\")(141, \"span\")(142, \"span\")(143, \"span\")(144, \"span\")(145, \"span\")(146, \"span\")(147, \"span\")(148, \"span\")(149, \"span\")(150, \"span\")(151, \"span\")(152, \"span\")(153, \"span\")(154, \"span\")(155, \"span\")(156, \"span\")(157, \"span\")(158, \"span\")(159, \"span\")(160, \"span\")(161, \"span\")(162, \"span\")(163, \"span\")(164, \"span\")(165, \"span\")(166, \"span\")(167, \"span\")(168, \"span\")(169, \"span\")(170, \"span\")(171, \"span\")(172, \"span\")(173, \"span\")(174, \"span\")(175, \"span\")(176, \"span\")(177, \"span\")(178, \"span\")(179, \"span\")(180, \"span\")(181, \"span\")(182, \"span\")(183, \"span\")(184, \"span\")(185, \"span\")(186, \"span\")(187, \"span\")(188, \"span\")(189, \"span\")(190, \"span\")(191, \"span\")(192, \"span\")(193, \"span\")(194, \"span\")(195, \"span\")(196, \"span\")(197, \"span\")(198, \"span\")(199, \"span\")(200, \"span\")(201, \"span\")(202, \"span\")(203, \"span\")(204, \"span\")(205, \"span\")(206, \"span\")(207, \"span\")(208, \"span\")(209, \"span\")(210, \"span\")(211, \"span\")(212, \"span\")(213, \"span\")(214, \"span\")(215, \"span\")(216, \"span\")(217, \"span\")(218, \"span\")(219, \"span\")(220, \"span\")(221, \"span\")(222, \"span\")(223, \"span\")(224, \"span\")(225, \"span\")(226, \"span\")(227, \"span\")(228, \"span\")(229, \"span\")(230, \"span\")(231, \"span\")(232, \"span\")(233, \"span\")(234, \"span\")(235, \"span\")(236, \"span\")(237, \"span\")(238, \"span\")(239, \"span\")(240, \"span\")(241, \"span\")(242, \"span\")(243, \"span\")(244, \"span\")(245, \"span\")(246, \"span\")(247, \"span\")(248, \"span\")(249, \"span\")(250, \"span\")(251, \"span\")(252, \"span\")(253, \"span\")(254, \"span\")(255, \"span\")(256, \"span\")(257, \"span\")(258, \"span\")(259, \"span\")(260, \"span\")(261, \"span\")(262, \"span\")(263, \"span\")(264, \"span\")(265, \"span\")(266, \"span\")(267, \"span\")(268, \"span\")(269, \"span\")(270, \"span\")(271, \"span\")(272, \"span\")(273, \"span\")(274, \"span\");\n          i0.ɵɵelement(275, \"span\")(276, \"span\")(277, \"span\")(278, \"span\")(279, \"router-outlet\");\n          i0.ɵɵelementEnd();\n        }\n      },\n      dependencies: [RouterOutlet, CommonModule],\n      styles: [\".nav-flex[_ngcontent-%COMP%]{display:flex;list-style-type:none;z-index:9999}.dropdown[_ngcontent-%COMP%]{position:relative;display:inline-block}.dropbtn[_ngcontent-%COMP%]{background-color:#0ef;color:#000;padding:10px 20px;border:none;cursor:pointer;margin-top:10px;font-weight:600}.dropdown-content[_ngcontent-%COMP%]{display:none;position:absolute;background-color:#f9f9f9;min-width:160px;box-shadow:0 8px 16px #0003;z-index:9999}.dropdown-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;padding:12px 16px;text-decoration:none;display:block}.dropdown-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#000;color:#0ef}.dropdown[_ngcontent-%COMP%]:hover   .dropdown-content[_ngcontent-%COMP%]{display:block}.dropdown[_ngcontent-%COMP%]:hover   .dropbtn[_ngcontent-%COMP%]{background-color:#c5065f;color:#fff}header[_ngcontent-%COMP%]{z-index:9999}\"]\n    });\n  }\n  return HeaderComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}